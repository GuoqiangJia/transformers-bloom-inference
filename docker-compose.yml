version: '3'
services:
  bloom-xp3mt-inference:
    build:
      context: .
      dockerfile: Dockerfile
    runtime: nvidia
    image: bloom-xp3mt-api-latest
    container_name: bloom-xp3mt-api-container
    restart: always
    ports:
      - "7862:7862"
      - "7863:7863"
    volumes:
      - ../logs:/src/logs/
      - ../bloom-models/bloom-mt0-xxl-mt-hf-cache/HF_cache:/cos/HF_cache/
    environment:
      - NVIDIA_VISIBLE_DEVICES=all
      - NVIDIA_DRIVER_CAPABILITIES=compute,utility